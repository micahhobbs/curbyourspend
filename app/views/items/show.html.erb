<ul class="nav navbar bg-white border-top border-bottom py-3 px-5">
  <div class="container d-flex justify-content-end">
    <li class="nav-item px-2">
      <%= link_to 'Edit Item', edit_item_path, class: 'btn btn-secondary' %>
    </li>
    <li class="nav-item px-2">
      <%= link_to 'My Items', items_path, class: 'btn btn-secondary' %>
    </li>
    <li class="nav-item px-2">
      <%= link_to 'Delete Item', item_path(@item), class: 'btn btn-secondary', method: :delete, data: { confirm: 'Are you sure you want to delete this item?' } %>
    </li>
  </div>
</ul>
<div class='container py-5'>
  <div class='row p-0 regular-shadow'>
    <div class='col-6 d-flex flex-column justify-content-center align-items-center' id='cta'>
      <div class='border border-dark border-1'>
        <% if @item.photo.key %>
          <%= cl_image_tag @item.photo.key, height: 500, width: 600, crop: :fill %>
        <% else %>
          <%= image_tag('pig.png', height: 500, width: 600) %>
        <% end  %>
      </div>
    </div>
    <div class='col-6 d-flex flex-column py-4 justify-content-center align-items-center bg-white'>
      <h1 class='mx-3 pb-1 pt-3 fs-1'><%= @item.name %></h1>
      <div class='py-2 d-flex flex-column text-center'>
        <% case @item.reason %>
        <% when "Fun"  %>
          <i class="fa-light far fa-face-laugh-beam show-icon"></i>
        <% when "Fitness" %>
          <i class="fa-light fas fa-dumbbell show-icon"></i>
        <% when "Productivity" %>
          <i class="fa-light fas fa-rocket show-icon"></i>
        <% when "Technology" %>
          <i class="fa-light fas fa-computer show-icon"></i>
        <% else %>
          <i class="fa-light far fa-circle-question show-icon"></i>
        <% end %>
        <p class='pt-3'><strong><%= @item.reason %></strong></p>
      </div>
      <div class='py-3 px-5'>
        <p><strong>Cost:</strong> <%= number_to_currency(@item.value) %></p>
        <p><strong>Status:</strong> <%= @item.status %></p>
        <p><strong>Description:</strong> <%= @item.description %></p>
        <div class='pb-4'>
          <%= link_to 'Link to item', @item.link, target: "_blank" %>
        </div>
      </div>
      <div class='d-inline-flex py-1'>
<%# Abandon will need to set status. Buy will need to direct to questionaire. %>
        <%= link_to 'Abandon', item_abandon_path(@item), method: :post, class: 'btn btn-lg wht-btn mx-2' %>
        <%= link_to 'Buy',  item_buy_path(@item), method: :post, class: 'btn btn-lg gen-btn mx-2' %>
        <%= link_to 'Extend', edit_item_path, class: 'btn btn-lg wht-btn mx-2' %>
      </div>
    </div>
    <div class='col-13 bg-white mt-4 py-4 px-5'>
      <div class='d-flex py-1 justify-content-between pb-3'>
        <h2>Comments</h2>
        <div class='d-grid col-2'>
          <%= link_to 'Add Comment', new_item_comment_path(@item.id), class: 'btn btn-lg gen-btn' %>
        </div>
      </div>
      <% if @item.comments.present? %>
      <div class="bg-light mb-2">
        <% @item.comments.each do |comment|  %>
          <div class = 'card p-3 mb-1'>
            <% if comment.user.username.present? %>
              <p class="mb-1"><strong>User:</strong> <%= comment.user.username %></p>
              <p class="mb-1"><strong>Comment:</strong> <%= comment.comment %></p>
            <% else %>
              <p class="mb-1"><strong>User:</strong> <%= comment.user.email %></p>
              <p class="mb-1"><strong>Comment:</strong> <%= comment.comment %></p>
            <% end %>
            <div class='d-flex justify-content-end'>
              <%= link_to 'Delete', comment_path(comment), class: 'btn wht-btn', method: :delete, data: { confirm: 'Delete this comment?' } %>
            </div>
          </div>
        <% end %>
    <% else %>
      <p class='pt-2'>There are no comments for this item.</p>
    <% end %>
    </div>
    </div>
  </div>
</div>
